"use strict";var navPopup=document.querySelector(".nav-popup"),navButtonClose=document.querySelector(".nav-popup__btn"),navLink=document.querySelector(".header__nav--hamburger"),navItemLink=document.querySelectorAll(".nav-popup--link"),op=.1;navLink.addEventListener("click",function(e){e.preventDefault(),navPopup.style.opacity=0,navPopup.classList.add("nav-popup--open"),setTimeout(function e(){op<1&&(op+=.1,navPopup.style.opacity=op,setTimeout(e,100))},100)}),navButtonClose.addEventListener("click",function(e){e.preventDefault(),setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)}),document.addEventListener("keydown",function(e){27===e.keyCode&&navPopup.classList.contains("nav-popup--open")&&setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)});for(var i=0;i<navItemLink.length;i++)navItemLink[i].addEventListener("click",function(e){setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)});var openCloseBtn=document.querySelectorAll(".team__member");for(a=0;a<openCloseBtn.length;a++)openCloseBtn[a].addEventListener("click",function(){if(this.classList.contains("team__member--active"))this.classList.contains("team__member--active")&&(this.classList.remove("team__member--active"),this.classList.remove("team__member--yellow"));else{for(var e=0;e<openCloseBtn.length;e++)openCloseBtn[e].classList.remove("team__member--yellow"),openCloseBtn[e].classList.remove("team__member--active");this.classList.add("team__member--active"),this.classList.add("team__member--yellow")}});var sectionMenu=document.querySelector(".menu"),menuOpenClose=document.querySelectorAll(".menu__item"),menuTextBtnColor=document.querySelectorAll(".menu__item--title");sectionMenu.addEventListener("click",function(e){for(var t=0;t<menuOpenClose.length;t++){menuOpenClose[t].classList.remove("menu__item--active");for(var n=0;n<menuTextBtnColor.length;n++)menuTextBtnColor[n].classList.remove("menu__item--yellow")}});for(var _loop=function(r){menuOpenClose[r].addEventListener("click",function(e){if(e.stopPropagation(),e.preventDefault(),menuOpenClose[r].classList.contains("menu__item--active")){menuOpenClose[r].classList.remove("menu__item--active");for(var t=0;t<menuTextBtnColor.length;t++)menuTextBtnColor[t].classList.remove("menu__item--yellow")}else{for(var n=0;n<menuOpenClose.length;n++){menuOpenClose[n].classList.remove("menu__item--active");for(var o=0;o<menuTextBtnColor.length;o++)menuTextBtnColor[o].classList.remove("menu__item--yellow")}for(var a=0;a<menuTextBtnColor.length;a++)menuTextBtnColor[a].classList.add("menu__item--yellow");menuOpenClose[r].classList.add("menu__item--active")}})},m=0;m<menuOpenClose.length;m++)_loop(m);var myForm=document.querySelector(".form"),sendButton=document.querySelector(".form__submit"),closeOrderPopup=document.querySelector(".order__cont--btn"),orderPopup=document.querySelector(".order__popup"),orderPopupText=document.querySelector(".order__cont--title");function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.comment)||(t=!1),t}function validateField(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}function validationFormInput(){var e=document.querySelector("#name"),t=document.querySelector("#phone"),n=document.querySelector("#street");function o(e){var t=!1,n=!1,o=!1;"Backspace"!=e.key&&"Delete"!=e.key&&"ArrowRight"!=e.key&&"ArrowLeft"!=e.key||(n=!0),"-"!=e.key&&"."!=e.key&&","!=e.key||(o=!0),"й"!=e.key&&"ц"!=e.key&&"у"!=e.key&&"й"!=e.key&&"к"!=e.key&&"е"!=e.key&&"н"!=e.key&&"й"!=e.key&&"г"!=e.key&&"ш"!=e.key&&"щ"!=e.key&&"й"!=e.key&&"з"!=e.key&&"х"!=e.key&&"ъ"!=e.key&&"й"!=e.key&&"ф"!=e.key&&"ы"!=e.key&&"в"!=e.key&&"й"!=e.key&&"а"!=e.key&&"п"!=e.key&&"р"!=e.key&&"й"!=e.key&&"о"!=e.key&&"л"!=e.key&&"д"!=e.key&&"й"!=e.key&&"ж"!=e.key&&"э"!=e.key&&"я"!=e.key&&"й"!=e.key&&"ч"!=e.key&&"с"!=e.key&&"м"!=e.key&&"й"!=e.key&&"и"!=e.key&&"т"!=e.key&&"ь"!=e.key&&"й"!=e.key&&"б"!=e.key&&"ю"!=e.key&&"q"!=e.key&&"й"!=e.key&&"w"!=e.key&&"e"!=e.key&&"r"!=e.key&&"й"!=e.key&&"t"!=e.key&&"y"!=e.key&&"u"!=e.key&&"й"!=e.key&&"i"!=e.key&&"o"!=e.key&&"p"!=e.key&&"a"!=e.key&&"s"!=e.key&&"d"!=e.key&&"f"!=e.key&&"g"!=e.key&&"h"!=e.key&&"j"!=e.key&&"k"!=e.key&&"l"!=e.key&&"z"!=e.key&&"x"!=e.key&&"c"!=e.key&&"v"!=e.key&&"b"!=e.key&&"n"!=e.key&&"m"!=e.key||(t=!0),0==t&&0==o&&0==n&&e.preventDefault()}t.addEventListener("keydown",function(e){var t=!1,n=!1,o=!1;(0<=e.key||9<=e.key)&&(t=!0),"-"==e.key&&(o=!0),"Backspace"!=e.key&&"Delete"!=e.key&&"ArrowRight"!=e.key&&"ArrowLeft"!=e.key||(n=!0),0==t&&0==o&&0==n&&e.preventDefault()}),e.addEventListener("keydown",o),n.addEventListener("keydown",o)}function commentsPopup(){for(var e=document.querySelectorAll(".reviews__hover--btn"),a=document.querySelector(".reviews__popup"),t=document.querySelector(".cont__btn"),r=document.querySelector(".cont__title"),l=document.querySelector(".cont__text"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.preventDefault();var t=this.parentNode,n=t.querySelector(".reviews__hover--title"),o=t.querySelector(".reviews__hover--text");r.textContent=n.innerHTML,l.textContent=o.innerHTML,a.style.display="block"});t.addEventListener("click",function(e){e.preventDefault(),a.style.display="none"}),document.addEventListener("keydown",function(e){27===e.keyCode&&(a.style.display="block")&&(a.style.display="none")})}myForm.addEventListener("submit",function(e){if(e.preventDefault(),validateForm(myForm)){var t={name:myForm.elements.name.value,phone:myForm.elements.phone.value,comment:myForm.elements.comment.value},n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.send(JSON.stringify(t)),n.onreadystatechange=function(){n.status<=400?(orderPopup.classList.add("order__popup--open"),orderPopupText.innerHTML="Сообщение отправлено"):(orderPopup.classList.add("order__popup--open"),orderPopupText.innerHTML="Ошибка")}}}),closeOrderPopup.addEventListener("click",function(e){e.preventDefault(),orderPopup.classList.remove("order__popup--open")}),document.addEventListener("keydown",function(e){27===e.keyCode&&orderPopup.classList.contains("order__popup--open")&&orderPopup.classList.remove("order__popup--open")}),validationFormInput(),commentsPopup();var left=document.querySelector(".slider__link--left"),right=document.querySelector(".slider__link--right"),items=document.querySelector(".slider__list"),computed=getComputedStyle(items),itemSl=document.getElementsByClassName("slider__content"),a=0,result=0;for(i=1;i<itemSl.length;i++)a++;console.log(result),right.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.right);t||(t=0),items.style.right=t<result?t+items.clientWidth+"px":0}),left.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.right);t||(t=0),0<t&&(items.style.right=t-items.clientWidth+"px")}),ymaps.ready(init);var placemarks=[{latitude:59.97,longitude:30.31,hintContent:"ул. Литераторов, д. 19",balloonContent:"Самые вкусные бургеры у нас! Заходите по адресу: ул. Литераторов, д. 19"},{latitude:59.91,longitude:30.51,hintContent:"Ленинградская ул., д. 9",balloonContent:"Самые вкусные бургеры у нас! Заходите по адресу: Ленинградская ул., д. 9"},{latitude:59.94,longitude:30.37,hintContent:"ул. Таврическая, д. 1",balloonContent:"Самые вкусные бургеры у нас! Заходите по адресу: ул. Таврическая, д. 1"},{latitude:59.89,longitude:30.31,hintContent:"Московский пр., д. 99",balloonContent:"Самые вкусные бургеры у нас! Заходите по адресу: Московский пр., д. 99"}],geoObjects=[];function init(){for(var e=new ymaps.Map("map",{center:[59.94,30.32],zoom:12,controls:["zoomControl"],behaviors:["drag"]}),t=0;t<placemarks.length;t++)geoObjects[t]=new ymaps.Placemark([placemarks[t].latitude,placemarks[t].longitude],{hintContent:placemarks[t].hintContent,balloonContent:placemarks[t].balloonContent},{iconLayout:"default#image",iconImageHref:"./img/map-marker.svg",iconImageSize:[46,57],iconImageOffset:[-23,-57],iconImageClipRect:[[415,0],[461,57]]});var n=new ymaps.Clusterer({clusterIcons:[{href:"./img/burgerfirst.png",size:[100,100],offset:[-50,-50]}],clusterIconContentLayout:null});e.geoObjects.add(n),n.add(geoObjects)}var player=void 0;function onYouTubePlayerAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"85CfHN0uJz0",playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(e){var t=player.getDuration(),n=void 0;$(".player").removeClass("hidden"),clearInterval(n),n=setInterval(function(){changeButtonPosition(player.getCurrentTime()/t*100)},1e3)}function onPlayerStateChange(e){var t=$(".player__start");switch(e.data){case 1:$(".player__wrapper").addClass("active"),t.addClass("paused");break;case 2:t.removeClass("paused")}}function changeButtonPosition(e){$(".player__playback-button").css({left:e+"%"})}function changeVolumeButtonPosition(e){$(".player__volume-button").css({left:e+"%"})}$(".player__start").on("click",function(e){var t=player.getPlayerState(),n=$(".player__splash");1!==t?(player.playVideo(),n.addClass("splash-active")):(player.pauseVideo(),n.removeClass("splash-active"))}),$(".player__playback").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=(e.pageX-t.offset().left)/t.width()*100,o=player.getDuration()/100*n;changeButtonPosition(n),player.seekTo(o)}),changeVolumeButtonPosition(100),$(".player__volume-bar").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=(e.pageX-t.offset().left)/t.width()*100;changeVolumeButtonPosition(n),player.setVolume(n)}),$(".player__splash").on("click",function(e){var t=player.getPlayerState(),n=$(".player__splash");1!==t?(player.playVideo(),n.addClass("splash-active")):(player.pauseVideo(),n.removeClass("splash-active"))});