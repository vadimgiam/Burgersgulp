"use strict";var navPopup=document.querySelector(".nav-popup"),navButtonClose=document.querySelector(".nav-popup__btn"),navLink=document.querySelector(".header__nav--hamburger"),navItemLink=document.querySelectorAll(".nav-popup--link"),op=.1;navLink.addEventListener("click",function(e){e.preventDefault(),navPopup.style.opacity=0,navPopup.classList.add("nav-popup--open"),setTimeout(function e(){op<1&&(op+=.1,navPopup.style.opacity=op,setTimeout(e,100))},100)}),navButtonClose.addEventListener("click",function(e){e.preventDefault(),setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)}),document.addEventListener("keydown",function(e){27===e.keyCode&&navPopup.classList.contains("nav-popup--open")&&setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)});for(var i=0;i<navItemLink.length;i++)navItemLink[i].addEventListener("click",function(e){setTimeout(function e(){0<=op?(op-=.1,navPopup.style.opacity=op,setTimeout(e,100)):navPopup.classList.remove("nav-popup--open")},100)});var a,openCloseBtn=document.querySelectorAll(".team__member");for(a=0;a<openCloseBtn.length;a++)openCloseBtn[a].addEventListener("click",function(){if(this.classList.contains("team__member--active"))this.classList.contains("team__member--active")&&(this.classList.remove("team__member--active"),this.classList.remove("team__member--yellow"));else{for(var e=0;e<openCloseBtn.length;e++)openCloseBtn[e].classList.remove("team__member--yellow"),openCloseBtn[e].classList.remove("team__member--active");this.classList.add("team__member--active"),this.classList.add("team__member--yellow")}});var sectionMenu=document.querySelector(".menu"),menuOpenClose=document.querySelectorAll(".menu__item"),menuTextBtnColor=document.querySelectorAll(".menu__item--title");sectionMenu.addEventListener("click",function(e){for(var t=0;t<menuOpenClose.length;t++){menuOpenClose[t].classList.remove("menu__item--active");for(var n=0;n<menuTextBtnColor.length;n++)menuTextBtnColor[n].classList.remove("menu__item--yellow")}});for(var _loop=function(l){menuOpenClose[l].addEventListener("click",function(e){if(e.stopPropagation(),e.preventDefault(),menuOpenClose[l].classList.contains("menu__item--active")){menuOpenClose[l].classList.remove("menu__item--active");for(var t=0;t<menuTextBtnColor.length;t++)menuTextBtnColor[t].classList.remove("menu__item--yellow")}else{for(var n=0;n<menuOpenClose.length;n++){menuOpenClose[n].classList.remove("menu__item--active");for(var o=0;o<menuTextBtnColor.length;o++)menuTextBtnColor[o].classList.remove("menu__item--yellow")}for(var r=0;r<menuTextBtnColor.length;r++)menuTextBtnColor[r].classList.add("menu__item--yellow");menuOpenClose[l].classList.add("menu__item--active")}})},m=0;m<menuOpenClose.length;m++)_loop(m);var myForm=document.querySelector(".form"),sendButton=document.querySelector(".form__submit"),closeOrderPopup=document.querySelector(".order__cont--btn"),orderPopup=document.querySelector(".order__popup");function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.comment)||(t=!1),t}function validateField(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}function validationFormInput(){var e=document.querySelector("#name"),t=document.querySelector("#phone"),n=document.querySelector("#street");function o(e){var t=!1,n=!1,o=!1;"Backspace"!=e.key&&"Delete"!=e.key&&"ArrowRight"!=e.key&&"ArrowLeft"!=e.key||(n=!0),"-"!=e.key&&"."!=e.key&&","!=e.key||(o=!0),"й"!=e.key&&"ц"!=e.key&&"у"!=e.key&&"й"!=e.key&&"к"!=e.key&&"е"!=e.key&&"н"!=e.key&&"й"!=e.key&&"г"!=e.key&&"ш"!=e.key&&"щ"!=e.key&&"й"!=e.key&&"з"!=e.key&&"х"!=e.key&&"ъ"!=e.key&&"й"!=e.key&&"ф"!=e.key&&"ы"!=e.key&&"в"!=e.key&&"й"!=e.key&&"а"!=e.key&&"п"!=e.key&&"р"!=e.key&&"й"!=e.key&&"о"!=e.key&&"л"!=e.key&&"д"!=e.key&&"й"!=e.key&&"ж"!=e.key&&"э"!=e.key&&"я"!=e.key&&"й"!=e.key&&"ч"!=e.key&&"с"!=e.key&&"м"!=e.key&&"й"!=e.key&&"и"!=e.key&&"т"!=e.key&&"ь"!=e.key&&"й"!=e.key&&"б"!=e.key&&"ю"!=e.key&&"q"!=e.key&&"й"!=e.key&&"w"!=e.key&&"e"!=e.key&&"r"!=e.key&&"й"!=e.key&&"t"!=e.key&&"y"!=e.key&&"u"!=e.key&&"й"!=e.key&&"i"!=e.key&&"o"!=e.key&&"p"!=e.key&&"a"!=e.key&&"s"!=e.key&&"d"!=e.key&&"f"!=e.key&&"g"!=e.key&&"h"!=e.key&&"j"!=e.key&&"k"!=e.key&&"l"!=e.key&&"z"!=e.key&&"x"!=e.key&&"c"!=e.key&&"v"!=e.key&&"b"!=e.key&&"n"!=e.key&&"m"!=e.key||(t=!0),0==t&&0==o&&0==n&&e.preventDefault()}t.addEventListener("keydown",function(e){var t=!1,n=!1,o=!1;(0<=e.key||9<=e.key)&&(t=!0),"-"==e.key&&(o=!0),"Backspace"!=e.key&&"Delete"!=e.key&&"ArrowRight"!=e.key&&"ArrowLeft"!=e.key||(n=!0),0==t&&0==o&&0==n&&e.preventDefault()}),e.addEventListener("keydown",o),n.addEventListener("keydown",o)}function commentsPopup(){for(var e=document.querySelectorAll(".reviews__hover--btn"),r=document.querySelector(".reviews__popup"),t=document.querySelector(".cont__btn"),l=document.querySelector(".cont__title"),a=document.querySelector(".cont__text"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.preventDefault();var t=this.parentNode,n=t.querySelector(".reviews__hover--title"),o=t.querySelector(".reviews__hover--text");l.textContent=n.innerHTML,a.textContent=o.innerHTML,r.style.display="block"});t.addEventListener("click",function(e){e.preventDefault(),r.style.display="none"}),document.addEventListener("keydown",function(e){27===e.keyCode&&(r.style.display="block")&&(r.style.display="none")})}sendButton.addEventListener("click",function(e){if(e.preventDefault(),validateForm(myForm)){var t={name:myForm.elements.name.value,phone:myForm.elements.phone.value,comment:myForm.elements.comment.value},n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.send(JSON.stringify(t)),n.addEventListener("load",function(){n.response.status<=400&&(sendButton.addEventListener("click",function(e){e.preventDefault(),orderPopup.classList.add("order__popup--open")}),closeOrderPopup.addEventListener("click",function(e){e.preventDefault(),orderPopup.classList.remove("order__popup--open")}),document.addEventListener("keydown",function(e){27===e.keyCode&&orderPopup.classList.contains("order__popup--open")&&orderPopup.classList.remove("order__popup--open")}))})}}),validationFormInput(),commentsPopup();var left=document.querySelector(".slider__link--left"),right=document.querySelector(".slider__link--right"),items=document.querySelector(".slider__list"),computed=getComputedStyle(items);right.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.right);t||(t=0),items.style.right=t<200?t+100+"%":0}),left.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.right);t||(t=0),0<t&&(items.style.right=t-100+"%")}),ymaps.ready(init);var placemarks=[{latitude:59.9712,longitude:30.314,hintContent:"ул. профессора Попова,д.23",balloonContent:"ул. профессора Попова,д.23"},{latitude:59.9494,longitude:30.3902,hintContent:"ул. Лафонская,д.2",balloonContent:"ул. Лафонская,д.2"},{latitude:59.8912,longitude:30.3104,hintContent:"ул. Старообрядчемкая,д.1",balloonContent:"ул. Старообрядчемкая,д.1"},{latitude:59.915,longitude:30.4975,hintContent:"пр. Солидарности,д.21",balloonContent:"пр. Солидарности,д.21"}],geoObjects=[];function init(){new ymaps.Map("map",{center:[59.94,30.32],zoom:12,controls:["zoomControl"],behaviors:["drag"]});for(var e=0;e<placemarks.length;e++)geoObjects[e]=new ymaps.Placemark([placemarks[e].latitude,placemarks[e].longitude],{hintContent:placemarks[e].hintContent,balloonContent:placemarks[e].balloonContent},{iconLayout:"default#image",iconImageHref:"img/icons/iconmap.svg",iconImageSize:[46,57],iconImageOffset:[-23,-57]});var t=new ymaps.Clusterer({clusterIcons:[{href:"img/burgerfirst.png",size:[100,100],offsset:[-50,-50]}],clusterIconContentLayout:null});map.geoObjects.add(t),t.add(geoObjects)}